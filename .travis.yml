addons:
  apt:
    # List of whitelisted in travis packages for ubuntu-precise can be found here:
    #   https://github.com/travis-ci/apt-package-whitelist/blob/master/ubuntu-precise
    # List of whitelisted in travis apt-sources:
    #   https://github.com/travis-ci/apt-source-whitelist/blob/master/ubuntu.json
    sources:
    - ubuntu-toolchain-r-test
    - llvm-toolchain-precise-3.7
    packages:
    - gcc-4.9
    - g++-4.9
    - clang-3.7
os:
  - linux
  - osx

sudo: required
dist: trusty

language: cpp

compiler:
  - gcc
  - clang
  
env:
  global:
    - GCC_VERSION="4.9"
    - CLANG_VERSION="3.7"
    
    # biicode credentials 
    - BIICODE_USER="gabyx"


# Install dependencies
install:

  - export ROOT_PATH=`pwd`/../;
  - export CHECKOUT_PATH=`pwd`;
  - echo "ROOT_PATH= $ROOT_PATH"
  - echo "CHECKOUT_PATH= $CHECKOUT_PATH"
  
  - chmod +x ./travis/install_${TRAVIS_OS_NAME}.sh
  - . ./travis/install_${TRAVIS_OS_NAME}.sh
 

script:
  - chmod +x ./travis/build.sh
  - . ./travis/build.sh

after_success:
  - cd $CHECKOUT_PATH
  - git reset --hard HEAD # Discard build artifacts
  - git clean -df # Discard build artifacts
  #- bii init -l
  #- bii user $BIICODE_USER -p $BIICODE_PASSWORD
  #- if [ -n "$BIICODE_PASSWORD" ]; then bii publish -r; fi

notifications:
  email: false
